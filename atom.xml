<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>One night in cs</title>
  
  
  <link href="/1night-cs/atom.xml" rel="self"/>
  
  <link href="https://handsome-feng.github.io/1night-cs/"/>
  <updated>2020-03-21T13:59:37.048Z</updated>
  <id>https://handsome-feng.github.io/1night-cs/</id>
  
  <author>
    <name>handsome_feng</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/irssi/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/irssi/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title>autoconf</title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/autoconf/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/autoconf/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p>The configuration scripts produced by Autoconf are independent of Autoconf when they are run, so their users do not need to have Autoconf. </p><p>Autoconf requirements_x000D_     AC_INIT(package, version, bug-report-address)<em>x000D</em>     information on the package_x000D_     checks for programs_x000D_     checks for libraries_x000D_     checks for header files_x000D_     checks for types_x000D_     checks for structures_x000D_     checks for compiler characteristics_x000D_     checks for library functions_x000D_     checks for system services_x000D_     AC_CONFIG_FILES([file…])<em>x000D</em>     AC_OUTPUT</p><p> if you want the package to use a configuration header file, you must add a call to AC_CONFIG_HEADERS</p><p>When using autoscan to maintain a configure.ac, simply consider adding its suggestions. The file autoscan.log contains detailed information on why a macro is requested.</p><h3 id="Using-ifnames-to-List-Conditionals"><a href="#Using-ifnames-to-List-Conditionals" class="headerlink" title="Using ifnames to List Conditionals"></a><strong>Using ifnames to List Conditionals</strong></h3><p>. If you give autoconf an argument, it reads that file instead of configure.ac and writes the configuration script to the standard output instead of to configure. If you give autoconf the argument -, it reads from the standard input instead of configure.ac and writes the configuration script to the standard output.</p><p>Some of the files are distributed with Autoconf; autoconf reads them first. Then it looks for the optional file acsite.m4 in the directory that contains the distributed Autoconf macro files, and for the optional file aclocal.m4 in the current directory. </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;The configuration scripts produced by Autoconf are independent of Autoconf when they are run, so their users do not need to have Autoconf
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title>Git</title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/git/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/git/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;branch-name&gt;</span><br><span class="line">git remote -v</span><br><span class="line">git remote add origin-gitlab git@salsa.debian.org:handsome_feng-guest/ukui-session-manager.git</span><br><span class="line">git push origin-gitlab debian:master</span><br><span class="line">git cherry-pick &lt;commit-id&gt;</span><br><span class="line">git cherry-pick &lt;start-commit-id&gt;..&lt;end-commit-id&gt;</span><br><span class="line">git submodule update --init</span><br><span class="line">git revert &lt;commit-id&gt;</span><br><span class="line">git reset</span><br></pre></td></tr></table></figure><p>将本地debian分支推送到远程origin-debian的master分支：</p><p><code>git push origin-debain debian:master</code></p><p>删除本地分支：</p><p><code>git branch -d &lt;branchName&gt;</code></p><p>删除远程分支：</p><p><code>git push origin --delete &lt;branchName&gt;</code></p><p>切换分支：</p><p><code>git checkout -b debian remotes/origin/debian</code></p><h4 id="合并某个分支的特定文件："><a href="#合并某个分支的特定文件：" class="headerlink" title="合并某个分支的特定文件："></a>合并某个分支的特定文件：</h4><p><code>git checkout [branch]  [file name]</code></p><h4 id="合并两个分支"><a href="#合并两个分支" class="headerlink" title="合并两个分支"></a>合并两个分支</h4><p><code>git remote add new-origin git@github.com:handsome-feng/new.git</code></p><p><code>git merge new-origin/master --allow-unreleated-histories</code></p><h4 id="删除某个commit"><a href="#删除某个commit" class="headerlink" title="删除某个commit"></a>删除某个commit</h4><p><code>git rebase -i previous_commit</code></p><h3 id="bzr-to-git"><a href="#bzr-to-git" class="headerlink" title="bzr to git"></a>bzr to git</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp -pr repo-dir repo-dir_backup                 # Make a backup</span><br><span class="line">cd repo-dir                                     # Change into your dir</span><br><span class="line">git init                                        # Initialise a new git repo</span><br><span class="line">bzr fast-export --plain . | git fast-import     # Do the actual conversion</span><br><span class="line">git co -f master                                # Will reply &apos;Already on master&apos;</span><br><span class="line">rm -rf .bzr/                                    # Remove the bzr data</span><br></pre></td></tr></table></figure><h3 id="Removing-files-from-Git-history"><a href="#Removing-files-from-Git-history" class="headerlink" title="Removing files from Git history"></a>Removing files from Git history</h3><p><code>$ java -jar bfg.jar --delete-folders .git --delete-files .git --no-blob-protection my-repo.git</code></p><h3 id="git使用代理"><a href="#git使用代理" class="headerlink" title="git使用代理"></a>git使用代理</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 设置代理</span></span><br><span class="line">git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class="line">git config --global https.proxy socks5://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 取消代理</span></span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure><h3 id="将项目一部分分离出来，作为独立项目"><a href="#将项目一部分分离出来，作为独立项目" class="headerlink" title="将项目一部分分离出来，作为独立项目"></a>将项目一部分分离出来，作为独立项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git subtree split -P dir_name -b branch_name</span><br><span class="line">mkdir ../branch_name</span><br><span class="line"><span class="built_in">cd</span> ../branch_name</span><br><span class="line">git init</span><br><span class="line">git pull ../old_project branch_name</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;常用命令&quot;&gt;&lt;a href=&quot;#常用命令&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title>GPG</title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/gpg/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/gpg/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.debian.org/Keysigning" rel="external nofollow noopener noreferrer" target="_blank">https://wiki.debian.org/Keysigning</a></p><h3 id="Create-key"><a href="#Create-key" class="headerlink" title="Create key"></a>Create key</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat &gt;&gt; ~/.gnupg/gpg.conf &lt;&lt;EOF</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> personal-digest-preferences SHA256</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> cert-digest-algo SHA256</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> default-preference-list SHA512 SHA384 SHA256 SHA224 AES256 AES192 AES CAST5 ZLIB BZIP2 ZIP Uncompressed</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> EOF</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> gpg --full-generate-key</span></span><br></pre></td></tr></table></figure><p>private key: </p><ul><li>decrypt emails sent to you</li><li>digitally sign emails</li></ul><p>public key:</p><ul><li>send you encrypted mail</li><li>verify emails you send.</li></ul><p>revocation certificate:</p><p>What happens if you lose access to a secret <a href="https://ssd.eff.org/en/glossary/key" rel="external nofollow noopener noreferrer" target="_blank">key<img src="https://ssd.eff.org/sites/all/themes/ssd/img/info.png" alt="img"></a>, or it stops being secret? A <a href="https://ssd.eff.org/en/glossary/revocation-certificate" rel="external nofollow noopener noreferrer" target="_blank">revocation certificate<img src="https://ssd.eff.org/sites/all/themes/ssd/img/info.png" alt="img"></a> is a file that you can generate that announces that you no longer trust that key. You generate it when you still have the secret key, and keep it for any future disaster.</p><h3 id="replacing-keys"><a href="#replacing-keys" class="headerlink" title="replacing keys"></a>replacing keys</h3><p><a href="https://keyring.debian.org/" rel="external nofollow noopener noreferrer" target="_blank">https://keyring.debian.org/</a></p><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><p><a href="https://help.ubuntu.com/community/GnuPrivacyGuardHowto" rel="external nofollow noopener noreferrer" target="_blank">https://help.ubuntu.com/community/GnuPrivacyGuardHowto</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://wiki.debian.org/Keysigning&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;https://wiki.debian.org/Keysigni
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title>Hexchat</title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/hexchat/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/hexchat/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p>Q: How to avoid ‘’No ping reply for %d seconds”</p><p>A: /set net_ping_timeout 0</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Q: How to avoid ‘’No ping reply for %d seconds”&lt;/p&gt;
&lt;p&gt;A: /set net_ping_timeout 0&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/regex/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/regex/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p>vim如何用正则表达式把数字换成相同长度的空格</p><p>:%s/\d/ /g</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;vim如何用正则表达式把数字换成相同长度的空格&lt;/p&gt;
&lt;p&gt;:%s/\d/ /g&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title>scrcpy</title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/scrcpy/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/scrcpy/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/Genymobile/scrcpy" rel="external nofollow noopener noreferrer" target="_blank">Home page</a></p><h3 id="Shortcuts"><a href="#Shortcuts" class="headerlink" title="Shortcuts"></a>Shortcuts</h3><table><thead><tr><th>Action</th><th>Shortcut</th><th>Shortcut (macOS)</th></tr></thead><tbody><tr><td>Switch fullscreen mode</td><td><code>Ctrl</code>+<code>f</code></td><td><code>Cmd</code>+<code>f</code></td></tr><tr><td>Resize window to 1:1 (pixel-perfect)</td><td><code>Ctrl</code>+<code>g</code></td><td><code>Cmd</code>+<code>g</code></td></tr><tr><td>Resize window to remove black borders</td><td><code>Ctrl</code>+<code>x</code> | <em>Double-click¹</em></td><td><code>Cmd</code>+<code>x</code> | <em>Double-click¹</em></td></tr><tr><td>Click on <code>HOME</code></td><td><code>Ctrl</code>+<code>h</code> | <em>Middle-click</em></td><td><code>Ctrl</code>+<code>h</code> | <em>Middle-click</em></td></tr><tr><td>Click on <code>BACK</code></td><td><code>Ctrl</code>+<code>b</code> | <em>Right-click²</em></td><td><code>Cmd</code>+<code>b</code> | <em>Right-click²</em></td></tr><tr><td>Click on <code>APP_SWITCH</code></td><td><code>Ctrl</code>+<code>s</code></td><td><code>Cmd</code>+<code>s</code></td></tr><tr><td>Click on <code>MENU</code></td><td><code>Ctrl</code>+<code>m</code></td><td><code>Ctrl</code>+<code>m</code></td></tr><tr><td>Click on <code>VOLUME_UP</code></td><td><code>Ctrl</code>+<code>↑</code> <em>(up)</em></td><td><code>Cmd</code>+<code>↑</code> <em>(up)</em></td></tr><tr><td>Click on <code>VOLUME_DOWN</code></td><td><code>Ctrl</code>+<code>↓</code> <em>(down)</em></td><td><code>Cmd</code>+<code>↓</code> <em>(down)</em></td></tr><tr><td>Click on <code>POWER</code></td><td><code>Ctrl</code>+<code>p</code></td><td><code>Cmd</code>+<code>p</code></td></tr><tr><td>Power on</td><td><em>Right-click²</em></td><td><em>Right-click²</em></td></tr><tr><td>Turn device screen off (keep mirroring)</td><td><code>Ctrl</code>+<code>o</code></td><td><code>Cmd</code>+<code>o</code></td></tr><tr><td>Expand notification panel</td><td><code>Ctrl</code>+<code>n</code></td><td><code>Cmd</code>+<code>n</code></td></tr><tr><td>Collapse notification panel</td><td><code>Ctrl</code>+<code>Shift</code>+<code>n</code></td><td><code>Cmd</code>+<code>Shift</code>+<code>n</code></td></tr><tr><td>Copy device clipboard to computer</td><td><code>Ctrl</code>+<code>c</code></td><td><code>Cmd</code>+<code>c</code></td></tr><tr><td>Paste computer clipboard to device</td><td><code>Ctrl</code>+<code>v</code></td><td><code>Cmd</code>+<code>v</code></td></tr><tr><td>Copy computer clipboard to device</td><td><code>Ctrl</code>+<code>Shift</code>+<code>v</code></td><td><code>Cmd</code>+<code>Shift</code>+<code>v</code></td></tr><tr><td>Enable/disable FPS counter (on stdout)</td><td><code>Ctrl</code>+<code>i</code></td><td><code>Cmd</code>+<code>i</code></td></tr></tbody></table><p><em>¹Double-click on black borders to remove them.</em><br><em>²Right-click turns the screen on if it was off, presses BACK otherwise.</em></p><p>QA: Mouse/keyboard didn’t work.</p><p><img src="https://user-images.githubusercontent.com/10740043/37449656-0693071e-2866-11e8-86f9-50dec962dd67.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://github.com/Genymobile/scrcpy&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;Home page&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Shor
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/screen/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/screen/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p>screen命令可以实现当前窗口与任务分离，我们即使离线了，服务器仍在后台运行任务。当我们重新登录服务器，可以读取窗口线程，重新连接任务窗口。</p><p>创建新窗口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">screen</span><br><span class="line">screen -S name</span><br><span class="line">screen command</span><br></pre></td></tr></table></figure><p>分离</p><p>ctrl a+d</p><p>screen -d name</p><p>恢复</p><p>screen -ls</p><p>screen -r</p><p>杀死</p><p>ctrl a+k</p><p>ctrl a ，输入quit</p><p>清理窗口</p><p>screen -wipe</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;screen命令可以实现当前窗口与任务分离，我们即使离线了，服务器仍在后台运行任务。当我们重新登录服务器，可以读取窗口线程，重新连接任务窗口。&lt;/p&gt;
&lt;p&gt;创建新窗口&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/ssh/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/ssh/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p>1.限制用户登录：</p><p>/etc/ssh/sshd_config：</p><p>AllowUsers    user1 <a href="mailto:user2@192.168.1.1" rel="external nofollow noopener noreferrer" target="_blank">user2@192.168.1.1</a>              </p><p>DenyUsers    user3 user4 </p><ol start="2"><li><p>限制 IP登录</p><p>通过设置 /etc/hosts.allow 和 /etc/hosts.deny 这个两个文件</p><ol><li>/etc/hosts.allow：</li></ol></li></ol><p>sshd:192.168.1.1:allow<br>sshd:192.168.1.1/24:allow</p><ol start="2"><li>/etc/hosts.allow：</li></ol><p>sshd:ALL # 允许全部的 ssh 登录 </p><p>hosts.allow &gt; hosts.deny (优先级)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1.限制用户登录：&lt;/p&gt;
&lt;p&gt;/etc/ssh/sshd_config：&lt;/p&gt;
&lt;p&gt;AllowUsers    user1 &lt;a href=&quot;mailto:user2@192.168.1.1&quot; rel=&quot;external nofollow noopener nore
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/v2ray/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/v2ray/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p>服务器端:</p><ol><li>注册域名</li><li>注册cloudflare<ul><li>Add your site</li><li>添加域名解析记录，选择A记录，name填www，IPv4填写你的搬瓦工VPS的IP，云朵请点成灰色仅dns解析，先不使用CDN</li><li>提示修改Nameservers，并提供了两个域名服务器地址，在你的域名注册商那修改域名服务器即可</li><li>SSL设置为Full</li></ul></li><li>安装v2ray<ul><li>bash &lt;(curl -s -L <a href="https://git.io/v2ray.sh" rel="external nofollow noopener noreferrer" target="_blank">https://git.io/v2ray.sh</a>)</li><li>传输协议选择4:WebSocket+TLS</li><li>确认域名已经解析到vps地址，然后输入正确的域名</li><li>v2ray url生成vmess url链接，用户配置客户端</li></ul></li></ol><p>客户端：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://install.direct/go.sh</span><br><span class="line">sudo bash go.sh</span><br></pre></td></tr></table></figure><p>将配置文件拷贝到/etc/v2ray/config.json</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start v2ray</span><br></pre></td></tr></table></figure><p>chromium –proxy-server=”socks5://127.0.0.1:1080”</p><p>终端代理：</p><ol><li>export（测试无效）</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=127.0.0.1:1080</span><br><span class="line">export https_proxy=127.0.0.1:1080</span><br></pre></td></tr></table></figure><ol start="2"><li>Use proxychains:</li></ol><p>sudo proxychains apt update</p><p>vim /etc/proxychains.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ProxyList]</span><br><span class="line">socks5 127.0.0.1 1080</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;服务器端:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;注册域名&lt;/li&gt;
&lt;li&gt;注册cloudflare&lt;ul&gt;
&lt;li&gt;Add your site&lt;/li&gt;
&lt;li&gt;添加域名解析记录，选择A记录，name填www，IPv4填写你的搬瓦工VPS的IP，云朵请点成灰色仅dns解析，先不使用
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title>vim</title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/vim/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/vim/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Su-write"><a href="#Su-write" class="headerlink" title="Su-write"></a>Su-write</h1><p>If you find you do not have permission to perform <code>:w</code>, use the following: </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:w !sudo tee &quot;%&quot; &gt; /dev/null</span><br></pre></td></tr></table></figure><p>You can make a command so <code>:W</code> invokes sudo: </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command W w !sudo tee &quot;%&quot; &gt; /dev/null</span><br></pre></td></tr></table></figure><p>Or, if you know about the problem beforehand: </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudoedit path_to_file</span><br><span class="line">sudo -e path_to_file</span><br></pre></td></tr></table></figure><h1 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h1><p>向下查找</p><p>/searchstring</p><p>向上查找</p><p>?searchstring</p><p>n N 重复上次查找</p><p>set incsearch</p><p>设置增量查找</p><p>set noincsearch</p><p>关闭增量查找</p><p>匹配以The开始的行</p><p>/^The</p><p>匹配以.结束的行</p><p>/.$</p><p>匹配任意linu开始的任意词</p><p>/linu. </p><p>匹配以abc结束的字</p><p>\abc&gt;</p><p>匹配以abc开始的字</p><p>&lt;abc</p><p>匹配以abc开始的任意字</p><p>\abc*</p><p>匹配除abc开头外的任意字</p><p>[^abc]</p><p>匹配任意字母和数字</p><p>/[a-aA-Z0-9]</p><p>显示当前文档及编辑信息</p><p>CTRL+G</p><h3 id="分屏"><a href="#分屏" class="headerlink" title="分屏"></a>分屏</h3><ol><li><p>打开文件并且分屏<br> <code>vim -o[n] file1 [file2 ...]</code><br> <code>vim -O[n] file1 [file2 ...]</code><br> 小写o是水平分屏,大写O是垂直分屏;中括号表示可有可无,n分屏的个数</p></li><li><p>在vim中的命令模式下分屏</p><p> a. 垂直分屏</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:vs [file2]</span><br></pre></td></tr></table></figure><p> 垂直分屏,后面不跟文件名是将当前文件垂直分屏;跟文件名是将新文件在垂直分屏中打开(也可用 vsp或者vsplit代替vs) </p><blockquote><p>快捷键操作可以不学:<br> 垂直分屏的快捷键操作为:ctrl+w v(同时按下ctrl和w键后,松开再按v键:快捷键操作只可将当前文件分屏)</p></blockquote></li></ol><p>b.水平分屏<br> <code>:sv [file2]</code><br> 水平分屏,后面不跟文件名是将当前文件水平分屏;跟文件名是将新文件在水平分屏中打开(也可用 sp或者split代替sv)</p><blockquote><p>快捷键操作可以不学:<br> 水平的快捷键操作为:ctrl+w s(同时按下ctrl和w键后,松开再按s键:快捷键操作只可将当前文件分屏)</p></blockquote><p>c. 新建文件水平分屏<br> <code>:new [newfile]</code><br> 此命令会新建一个水平分屏<br> 如果跟有文件名则会新建一个文件,当写入内容并且保存退出后会新建该文件(如果没有写入内容保存退出也不会新建该文件);</p><blockquote><p>快捷键操作可以不学:<br> 新建文件水平分屏的快捷键操作为:ctrl+w n(同时按下ctrl和w键后,松开再按n键)<br> 如果没有跟文件名,在写入内容后保存时命令模式下输入:<br> <code>:w filename</code><br> 会新建一个名字为filename的文件</p></blockquote><ol><li><p>移动光标<br> a. 把光标移到右边的屏中<br> <code>ctrl+w l</code><br> b. 把光标移到左边的屏中<br> <code>ctrl+w h</code><br> c. 把光标移到上边的屏中<br> <code>ctrl+w k</code><br> d. 把光标移到下边的屏中<br> <code>ctrl+w j</code><br> e. 把光标移到下一个屏中<br> <code>ctrl+w w</code><br> f. 把光标移到上一个屏中<br> <code>ctrl+w p</code></p></li><li><p>移动分屏<br> a. 向右移动<br> <code>ctrl+w L</code><br> b. 向左移动<br> <code>ctrl+w H</code><br> c. 向上移动<br> <code>ctrl+w K</code><br> d. 向下移动<br> <code>ctrl+w J</code><br> e. 向下旋转窗口<br> <code>ctrl+w r</code><br> f. 向上旋转窗口<br> <code>ctrl+w R</code><br> g. 当前窗口与下一个窗口对调<br> <code>ctrl+w x</code></p></li><li><p>控制分屏的尺寸<br> a. 减少当前窗口高度（对上下分屏才有用）<br> <code>ctrl+w -</code>        <code>亲测字体大小会发生变化</code><br> b. 增加当前窗口高度（对上下分屏才有用）<br> <code>ctrl+w +</code>      <code>亲测字体大小会发生变化</code><br> c. 增加当前窗口宽度（对左右分屏才有用）<br> <code>ctrl+w &gt;</code>      <code>按完ctrl w 后松开,同时按下shift &gt;</code><br> d. 减少当前窗口宽度（对左右分屏才有用）<br> <code>ctrl+w &lt;</code>       <code>按完ctrl w 后松开,同时按下shift &lt;</code><br> e. 使所有窗口恢复均等<br> <code>ctrl+w =</code></p></li><li><p>关闭分屏<br> a. 关闭除当前分屏外的其他分屏<br> <code>:only</code><br> 快捷键操作</p><blockquote><p>快捷操作为:ctrl+w o(最后一个分屏不能用此快捷键关闭)</p></blockquote></li></ol><p>b. 关闭当前分屏<br> &gt;快捷操作为:ctrl+w c (最后一个分屏不能用此快捷键关闭)</p><p>c. 关闭当前分屏<br> &gt;快捷操作为:ctrl+w q (可用来关闭最后一个分屏)</p><p>d. 关闭所有分屏<br> <code>:qa</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Su-write&quot;&gt;&lt;a href=&quot;#Su-write&quot; class=&quot;headerlink&quot; title=&quot;Su-write&quot;&gt;&lt;/a&gt;Su-write&lt;/h1&gt;&lt;p&gt;If you find you do not have permission to perf
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/x2x/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/x2x/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p>x2x does exactly what you want:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -X othermachine x2x -west -to :0</span><br></pre></td></tr></table></figure><p>Now you can move your mouse to the left of your laptop and it wii appear in that other machine. Keyboard ‘goes’ there too.</p><p>You’ll need to enable X forwarding in that other machine’s sshd.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;x2x does exactly what you want:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/p
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/xdotool/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/xdotool/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<p>xdotool getmouselocation </p><p>My extra for sequential clicking into a few positions is a file positions.txt (given by a few eval/echo runs):</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">123 13</span><br><span class="line">423 243</span><br><span class="line">232 989</span><br></pre></td></tr></table></figure><p>And the code that uses it is:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">     X=`<span class="built_in">echo</span> <span class="variable">$line</span>| cut -c1-3`; </span><br><span class="line">     Y=`<span class="built_in">echo</span> <span class="variable">$line</span>| cut -c4-7`;</span><br><span class="line">     xdotool mousemove --sync $((  0.5 + <span class="variable">$X</span> )) $(( 0.5 + <span class="variable">$Y</span> ));</span><br><span class="line">     xdotool click 1</span><br><span class="line"><span class="keyword">done</span> &lt; positions.txt</span><br></pre></td></tr></table></figure><p>If there is no need to scale pixels (unlike my case), it could be a simple</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">     xdotool mousemove --sync <span class="variable">$line</span>;</span><br><span class="line">     xdotool click 1</span><br><span class="line"><span class="keyword">done</span> &lt; positions.txt</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;xdotool getmouselocation &lt;/p&gt;
&lt;p&gt;My extra for sequential clicking into a few positions is a file positions.txt (given by a few eval/echo 
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/tools/xwd/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/tools/xwd/</id>
    <published>2020-03-21T13:59:37.048Z</published>
    <updated>2020-03-21T13:59:37.048Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xwd -out screenshot.xwd -root -display :0.0</span><br><span class="line">convert /tmp/screenshot.xwd /tmp/screenshot.png</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;
      
    
    </summary>
    
    
      <category term="tools" scheme="https://handsome-feng.github.io/1night-cs/categories/tools/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/index/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/index/</id>
    <published>2020-03-21T13:59:37.032Z</published>
    <updated>2020-03-21T13:59:37.032Z</updated>
    
    <content type="html"><![CDATA[<h3 id="在线工具"><a href="#在线工具" class="headerlink" title="在线工具"></a>在线工具</h3><p><a href="https://imgur.com/" rel="external nofollow noopener noreferrer" target="_blank">在线贴图工具</a><br><a href="https://paste.ubuntu.com/" rel="external nofollow noopener noreferrer" target="_blank">在线贴文字工具</a><br><a href="http://www.soogif.com/" rel="external nofollow noopener noreferrer" target="_blank">在线gif制作</a><br><a href="https://www.processon.com/diagrams" rel="external nofollow noopener noreferrer" target="_blank">在线流程图</a></p><h3 id="实用工具"><a href="#实用工具" class="headerlink" title="实用工具"></a>实用工具</h3><ol><li>Youcompleteme</li><li>gollum</li><li>irssi</li><li>goldendict</li><li>Beyond Compare</li><li>SS</li><li>xdotool</li></ol><h3 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h3><ol><li>discuz</li><li>wordpress</li></ol><h3 id="启动流程"><a href="#启动流程" class="headerlink" title="启动流程"></a>启动流程</h3><ol><li>BIOS</li><li>Kernel</li><li>lightdm</li><li>session-manager</li></ol><h3 id="设备"><a href="#设备" class="headerlink" title="设备"></a>设备</h3><ol><li>终端: /dev/tty1 … /dev/pts/0 …</li></ol><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><ol><li>包管理<ol start="2"><li>系统监控<ul><li>网络</li><li>ifconfig</li><li>netstat</li><li>tcpdump</li><li>wireshark</li></ul></li></ol></li></ol><h3 id="跨版本"><a href="#跨版本" class="headerlink" title="跨版本"></a>跨版本</h3><ol><li>Flatpak</li><li>Snap<ol start="3"><li>Appimage</li></ol></li></ol><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ol><li><a href="http://ascii-table.com/ansi-escape-sequences.php" rel="external nofollow noopener noreferrer" target="_blank">ANSI控制码</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;在线工具&quot;&gt;&lt;a href=&quot;#在线工具&quot; class=&quot;headerlink&quot; title=&quot;在线工具&quot;&gt;&lt;/a&gt;在线工具&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://imgur.com/&quot; rel=&quot;external nofollow noopener n
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/device/%E7%BD%91%E5%8D%A1/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/device/网卡/</id>
    <published>2020-03-21T13:59:37.032Z</published>
    <updated>2020-03-21T13:59:37.032Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="device" scheme="https://handsome-feng.github.io/1night-cs/categories/device/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/language/qt/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/language/qt/</id>
    <published>2020-03-21T13:59:37.032Z</published>
    <updated>2020-03-21T13:59:37.032Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="language" scheme="https://handsome-feng.github.io/1night-cs/categories/language/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/linux/systemd/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/linux/systemd/</id>
    <published>2020-03-21T13:59:37.032Z</published>
    <updated>2020-03-21T13:59:37.032Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="linux" scheme="https://handsome-feng.github.io/1night-cs/categories/linux/"/>
    
    
  </entry>
  
  <entry>
    <title>手动定制优麒麟镜像</title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/debian&amp;ubuntu/custom-iso/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/debian&amp;ubuntu/custom-iso/</id>
    <published>2020-03-21T13:59:37.032Z</published>
    <updated>2020-03-21T13:59:37.032Z</updated>
    
    <content type="html"><![CDATA[<h2 id="手动集成版本流程如下："><a href="#手动集成版本流程如下：" class="headerlink" title="手动集成版本流程如下："></a>手动集成版本流程如下：</h2><ol><li><p>点击基础iso镜像，右键挂载镜像:</p><p>  <code>sudo mount xxx.iso /mnt/uk64</code></p></li><li><p>创建一个image-iso目录，拷贝挂载镜像的所有文件到image-iso目录（注意隐藏文件不要漏掉了）</p><p>  <code>cd /image-iso</code></p><p>  <code>rsync -a /mnt/uk64 .</code></p></li><li><p>将image-iso/casper/filesystem.squashfs 移动到工作目录下:</p><p>  <code>sudo mv uk64/casper/filesystem.squashfs .</code></p></li><li><p>解压缩文件，生成squashfs-root目录</p><p>  <code>sudo unsquashfs filesystem.squashfs</code></p></li><li><p>chroot进入squashfs-root目录，命令：</p><p>  <code>sudo chroot squashfs-root</code></p></li><li><p>进入chroot后第一个操作为mount：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mount -t proc proc /proc</span><br><span class="line">mount -t sysfs sysfs /sys</span><br><span class="line">mount -t devtmpfs devtmpfs /dev</span><br><span class="line">mount -t devpts devpts /dev/pts</span><br></pre></td></tr></table></figure></li><li><p>配置chroot环境中的网络、apt源等（配置网络修改/etc/resolv.conf，修改源更改/etc/apt/sources.list文件,添加multiverse)</p><p>  <code>vim.tiny /etc/resolv.conf: nameserver 114.114.114.114</code></p></li><li><p>chroot环境中安装包、删除包、修改配置文件等</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add-apt-repository ppa:feng-kylin/1810aid</span><br><span class="line">apt-get install foxitreader flashplugin-installer libgconf-2-4</span><br><span class="line">apt purge apport apport-gtk apport-symptoms python-apport gnome-software gnome-software-common ubuntu-software libreoffice-* mate-polkit kylin-greeter</span><br></pre></td></tr></table></figure><ul><li><p>windows字体 添加可执行权限和可读权限<br>sudo cp -r huawen_font /usr/share/fonts<br>chmod +rx -R huawen_font</p></li><li><p>更新字体缓存，执行命令</p><p><code>fc-cache -v -f</code></p></li><li><p>更新开机动画 (可选，主题包postinst文件里有)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">update-alternatives \</span><br><span class="line">    --install /usr/share/plymouth/themes/default.plymouth default.plymouth \</span><br><span class="line">    /usr/share/plymouth/themes/ubuntukylin-logo/ubuntukylin-logo.plymouth 150</span><br><span class="line">update-alternatives \</span><br><span class="line">    --install /usr/share/plymouth/themes/text.plymouth text.plymouth \</span><br><span class="line">    /usr/share/plymouth/themes/ubuntukylin-text/ubuntukylin-text.plymouth 150</span><br><span class="line">update-initramfs -u</span><br></pre></td></tr></table></figure></li><li><p>更新grub主题 (可选)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -e /boot/grub/grub.cfg ]; <span class="keyword">then</span></span><br><span class="line">    update-grub || <span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></li><li><p>还原定制版本中修改的配置文件及清除缓存，如/etc/resolv.conf文件，/var/cache/apt/archives目录下的deb包，/var/lib/apt/lists目录下的apt更新list文件等</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">add-apt-repository -r ppa:feng-kylin/1810aid</span><br><span class="line">rm /etc/apt/sources.list.d/feng-kylin-*</span><br><span class="line">rm /var/lib/apt/lists/ppa.launchpad.net_feng-kylin_1810aid_ubuntu_dists_cosmic_*</span><br><span class="line">apt-get clean</span><br><span class="line">rm /var/lib/apt/periodic/update-success-stamp</span><br><span class="line">vim.tiny /etc/resolv.conf</span><br><span class="line">vim.tiny /etc/apt/sources.list</span><br><span class="line">history -c</span><br></pre></td></tr></table></figure></li></ul></li><li><p>退出chroot前最后一个操作：</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">umount -l /sys</span><br><span class="line">umount -l /dev/pts</span><br><span class="line">umount -l /dev</span><br><span class="line">umount -l /proc</span><br></pre></td></tr></table></figure></li><li><p>退出chroot环境:</p><p>  <code>exit</code></p></li><li><p>删除旧的filesystem.squashfs，创建新的filesystem.squashfs，命令如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rm filesystem.squashfs</span><br><span class="line">sudo mksquashfs squashfs-root/ filesystem.squashfs</span><br></pre></td></tr></table></figure></li><li><p>更新filesystem.squashfs.size</p><p> <code>sudo du -sx --block-size=1 squashfs-root | cut -f1 &gt; filesystem.size</code></p></li><li><p>删除squashfs-root目录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -r squashfs-root/</span><br></pre></td></tr></table></figure></li><li><p>将filesytem.squashfs 和filesystem.size移动到casper目录，并修改新filesystem.squashfs文件属主和权限，跟其余文件一样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mv filesystem.squashfs filesystem.size uk64/casper</span><br><span class="line">cd uk64/casper</span><br><span class="line">sudo chmod 444 filesystem.squashfs filesystem.size</span><br><span class="line">sudo chown feng:feng filesystem.squashfs filesystem.size</span><br></pre></td></tr></table></figure></li><li><p>定制ubiquity安装过程（可选）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vim uk64/preseed/cli.seed</span><br><span class="line">sudo vim boot/grub/grub.cfg</span><br></pre></td></tr></table></figure></li><li><p>修改bootlogo（可选）:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mv uk64/isolinux/bootlogo .</span><br><span class="line">mkdir bootlogo-tmp &amp;&amp; cd bootlogo-tmp</span><br><span class="line">cpio -i &lt; ../bootlogo</span><br><span class="line">sudo vim txt.cfg lang langlist</span><br><span class="line">ls -1 | cpio --quiet -o &gt; ./bootlogo</span><br><span class="line">sudo cp * ../uk64/isolinux</span><br></pre></td></tr></table></figure></li><li><p>进入到image-iso目录，更新md5值：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo rm md5sum.txt</span><br><span class="line">find -type f -print0 | sudo xargs -0 md5sum | grep -v isolinux/boot.cat | sudo tee md5sum.txt</span><br><span class="line">sudo chown feng:feng md5sum.txt</span><br><span class="line">sudo chmod -w md5sum.txt</span><br></pre></td></tr></table></figure></li><li><p>进入到uk64目录，压缩镜像</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xorriso -as mkisofs -r -checksum_algorithm_iso md5,sha1 -V Ubuntu-Kylin\ 19.04 -o ubuntukylin-19.04-amd64.iso -isohybrid-mbr /usr/lib/ISOLINUX/isohdpfx.bin -cache-inodes -J -l -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -eltorito-alt-boot -e boot/grub/efi.img -no-emul-boot -isohybrid-gpt-basdat -isohybrid-apm-hfsplus uk64/</span><br></pre></td></tr></table></figure></li></ol><ul><li>如果是32位:  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xorriso -as mkisofs -r -checksum_algorithm_iso md5,sha1 -V Ubuntu-Kylin\ 18.04.2 -o ubuntukylin-18.04.2-enhanced-i386.iso -isohybrid-mbr /usr/lib/ISOLINUX/isohdpfx.bin -partition_offset 16 -cache-inodes -J -l -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table uk32/</span><br></pre></td></tr></table></figure></li></ul><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul><li><p>pressed配置：</p><p>   <a href="https://help.ubuntu.com/lts/installation-guide/s390x/apbs04.html#preseed-l10n" rel="external nofollow noopener noreferrer" target="_blank">https://help.ubuntu.com/lts/installation-guide/s390x/apbs04.html#preseed-l10n</a></p><p>   <a href="https://wiki.ubuntu.com/UbiquityAutomation" rel="external nofollow noopener noreferrer" target="_blank">https://wiki.ubuntu.com/UbiquityAutomation</a></p><p>   <a href="https://help.ubuntu.com/community/InstallCDCustomization" rel="external nofollow noopener noreferrer" target="_blank">https://help.ubuntu.com/community/InstallCDCustomization</a></p></li><li><p>修改/etc/sudoers,使得sudo不需要密码：</p><p>kylin (ALL: ALL) NOPASSWD: ALL</p><p>%sudo (ALL: ALL) NOPASSWD: ALL</p></li><li><p>解开initrd:</p><p>unmkinitramfs initrd</p></li><li><p>自动化定制ISO工具：</p><p>   <a href="https://launchpad.net/cubic" rel="external nofollow noopener noreferrer" target="_blank">Cubic</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;手动集成版本流程如下：&quot;&gt;&lt;a href=&quot;#手动集成版本流程如下：&quot; class=&quot;headerlink&quot; title=&quot;手动集成版本流程如下：&quot;&gt;&lt;/a&gt;手动集成版本流程如下：&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;点击基础iso镜像，右键挂载镜像:&lt;/p&gt;
&lt;p&gt;
      
    
    </summary>
    
    
      <category term="debian&amp;ubuntu" scheme="https://handsome-feng.github.io/1night-cs/categories/debian-ubuntu/"/>
    
    
  </entry>
  
  <entry>
    <title>deb包定制</title>
    <link href="https://handsome-feng.github.io/1night-cs/wiki/debian&amp;ubuntu/deb/"/>
    <id>https://handsome-feng.github.io/1night-cs/wiki/debian&amp;ubuntu/deb/</id>
    <published>2020-03-21T13:59:37.032Z</published>
    <updated>2020-03-21T13:59:37.032Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解包</span></span><br><span class="line">dpkg -X foo.deb extract/</span><br><span class="line">dpkg -e foo.deb extract/DEBIAN</span><br><span class="line"><span class="comment"># 按需求修改</span></span><br><span class="line"><span class="comment"># 打包</span></span><br><span class="line">dpkg-deb -b extract/ result/</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=
      
    
    </summary>
    
    
      <category term="debian&amp;ubuntu" scheme="https://handsome-feng.github.io/1night-cs/categories/debian-ubuntu/"/>
    
    
  </entry>
  
</feed>
